webpackJsonp([2],{A4cv:function(t,o,e){var n=e("SAwO");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("rjj0").default)("dcdcf392",n,!1,{})},SAwO:function(t,o,e){(t.exports=e("FZ+f")(!1)).push([t.i,"",""])},ZRga:function(t,o,e){var n=e("vZmf");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("rjj0").default)("1e62ae6d",n,!1,{})},lfHO:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("7109"),a={data:function(){return{email:"",password:"",authError:void 0,token:null,useLarryLogin:!1,authWindow:null,authFailed:!1}},mounted:function(){var t=n.b.get.item("authToken");t&&this.$store.commit("user/setAuthToken",{authToken:t})},methods:{clonkspotLogin:function(){this.authWindow=Object(n.R)(this.$http.defaults.baseURL+"/auth/clonkspot"),this.checkTokenLoop()},larryLogin:function(){var t=this,o={user:{email:this.email,password:this.password}};this.authError=void 0,this.$http.post("/auth/login",o).then(function(o){t.$store.commit("user/setAuthToken",{authToken:o.data.user.token}),t.email="",t.password=""}).catch(function(o){o.response&&o.response.data?t.authError=o.response.data.errors:o.message?t.authError=o.message:(t.authError="Failed to log in",console.error({error:o}))})},checkTokenLoop:function(t){var o=n.b.get.item("authToken");o?(this.$store.commit("user/setAuthToken",{authToken:o}),this.authWindow.close(),this.authWindow=null):setTimeout(this.checkTokenLoop,500)}}},r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[t.$store.getters["user/loggedIn"]?e("div",[e("q-card",[e("q-card-title",{staticClass:"bg-positive text-white"},[t._v("\n        Hi "+t._s(t.$store.state.user.decodedToken.username)+"\n      ")]),t._v(" "),e("q-card-separator"),t._v(" "),e("q-card-main",[e("p",[t._v("You have successfully logged in!")]),t._v(" "),e("q-btn",{attrs:{color:"negative",outline:"",small:"",icon:"fa-sign-out"},on:{click:function(o){t.$store.commit("user/logout")}}},[t._v("Logout")])],1)],1)],1):e("div",[t.useLarryLogin?e("div",{staticClass:"group"},[e("h5",[t._v("Larry Login")]),t._v(" "),t.authError?e("p",{staticClass:"text-negative"},["object"==typeof t.authError?e("span",[t._v("Email or password "+t._s(t.authError["email or password"]))]):e("span",[t._v(t._s(t.authError))])]):t._e(),t._v(" "),e("div",{staticClass:"group"},[e("q-input",{attrs:{error:void 0!==t.authError,name:"user","float-label":"Email"},on:{keyup:function(o){if(!("button"in o)&&t._k(o.keyCode,"enter",13,o.key))return null;t.larryLogin(o)}},model:{value:t.email,callback:function(o){t.email=o},expression:"email"}}),t._v(" "),e("q-input",{attrs:{error:void 0!==t.authError,name:"pass",type:"password","float-label":"Password"},on:{keyup:function(o){if(!("button"in o)&&t._k(o.keyCode,"enter",13,o.key))return null;t.larryLogin(o)}},model:{value:t.password,callback:function(o){t.password=o},expression:"password"}}),t._v(" "),e("q-btn",{attrs:{color:"positive",icon:"fa-sign-in"},on:{click:t.larryLogin}},[t._v("Larry login")])],1),t._v(" "),e("div",{staticClass:"text-right"},[e("q-btn",{attrs:{color:"tertiary",small:"",outline:""},on:{click:function(o){t.useLarryLogin=!1}}},[t._v("Log in via Clonkspot")])],1)]):e("div",{staticClass:"group"},[e("q-btn",{attrs:{color:"positive"},on:{click:t.clonkspotLogin}},[t._v("Log in via Clonkspot")]),t._v(" "),t.authFailed?e("p",{staticClass:"text-negative"},[t._v("Oups, something went wrong. Please try again")]):t._e(),t._v(" "),e("div",{staticClass:"text-right"},[e("q-btn",{attrs:{color:"tertiary",small:"",outline:""},on:{click:function(o){t.useLarryLogin=!0}}},[t._v("Log in via Larry")])],1)],1)])])},s=[];r._withStripped=!0;var i=e("XyMi"),l=!1;var u=function(t){l||e("A4cv")},c=Object(i.a)(a,r,s,!1,u,"data-v-09f11fe2",null);c.options.__file="src/components/ApiAuth.vue";var d={name:"LayoutDefault",components:{ApiAuth:c.exports},data:function(){return{}},methods:{}},p=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("q-layout",{attrs:{view:"lHh Lpr lFf"}},[e("q-layout-header",[e("q-toolbar",[e("q-toolbar-title",[t._v("\n        Larry UI\n        "),e("div",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v("Official source of mods for OpenClonk")])]),t._v(" "),e("q-tabs",[e("q-route-tab",{attrs:{slot:"title",icon:"fa-list",to:{name:"upload-list"},replace:"",hide:"icon",label:"Browse mods"},slot:"title"}),t._v(" "),e("q-route-tab",{attrs:{slot:"title",icon:"fa-upload",to:{name:"upload-create"},replace:"",hide:"icon",label:"Upload mod"},slot:"title"})],1),t._v(" "),t.$store.getters["user/loggedIn"]?e("q-btn",{attrs:{flat:"",icon:"fa-sign-out"},on:{click:function(o){t.$store.commit("user/logout")}}},[t._v("\n        Logout\n      ")]):t._e()],1)],1),t._v(" "),e("q-page-container",[e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"flex row items-end reverse-wrap gutter-md"},[e("div",{staticClass:"col"},[e("transition",{attrs:{mode:"out-in",duration:"200","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("router-view")],1)],1),t._v(" "),t.$store.getters["user/loggedIn"]?t._e():e("div",{staticClass:"col-auto"},[e("api-auth")],1)])])],1)],1)},v=[];p._withStripped=!0;var h=!1;var f=function(t){h||e("ZRga")},g=Object(i.a)(d,p,v,!1,f,null,null);g.options.__file="src/layouts/default.vue";o.default=g.exports},vZmf:function(t,o,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\nbody {\n  background: white url('/statics/bodybg.jpg') no-repeat fixed;\n}\n.q-layout-header .q-toolbar {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.q-layout-header .q-tabs-head {\n  background-color: transparent;\n}\n.light-bg, .q-card, .q-stepper {\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.indent {\n  margin-left: 1rem;\n}\n.markdown h1 {\n  font-size: 1.1rem;\n  font-style: italic;\n  font-weight: bold;\n}\n.markdown h2 {\n  font-size: 1.1rem;\n  font-style: italic;\n  font-weight: 500;\n}\n.markdown h3 {\n  font-size: 1.1rem;\n  font-style: italic;\n}\n.markdown h4, .markdown h5, .markdown h6 {\n  font-size: 1.0rem;\n  font-style: italic;\n}\n.markdown img {\n  display: none;\n}\n",""])}});