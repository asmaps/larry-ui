webpackJsonp([3],{A2bU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("PJh5"),i=a.n(n),o={computed:{showList:function(){return"upload-list"===this.$route.name},visibleColumns:function(){var t=this,e=["description","action"];return this.tableColumns.map(function(t){return t.name}).filter(function(a){return t.showList||-1===e.indexOf(a)})}},mounted:function(){this.refresh()},watch:{showList:{handler:function(t,e){t&&t!==e&&this.refresh()},immediate:!0}},data:function(){return{response:{},uploads:[],tableConfig:{refresh:!0,leftStickyColumns:1,rightStickyColumns:3,rowHeight:"60px"},tableColumns:[{name:"title",label:"Title",field:"title",align:"left"},{name:"description",label:"Description",field:"description",align:"left",format:function(t){return"string"==typeof t&&t.length>50?t.slice(0,50)+"...":t}},{name:"author",label:"Author",field:function(t){return t.author.username},align:"left"},{name:"voting",label:"Voting",field:"voting",align:"left"},{name:"updatedAt",label:"Last update",field:"updatedAt",align:"left",format:function(t){return i()(t).from()}},{name:"action",label:"Actions",field:"action",align:"left"}]}},methods:{refresh:function(t){var e=this;this.$http.get("/uploads").then(function(a){e.response=a,e.uploads=a.data.uploads,t&&t()})},deleteUpload:function(t){var e=this;this.$q.dialog({title:"Delete mod?",message:'Do you really want to delete the mod "'+t.title+'"? This cannot be undone!',ok:{label:"Yes, delete!",icon:"fa-trash",color:"negative",outline:!0},cancel:"Cancel"}).then(function(){return e.$http.delete("/uploads/"+t._id).then(function(t){return e.refresh()})})}}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex row no-wrap gutter-lg"},[a("transition",{attrs:{name:"grow-fade"}},[t.showList?t._e():a("div",{staticClass:"col-sm-12 col-lg-8 col-xl-7"},[a("router-view")],1)]),t._v(" "),a("div",{staticClass:"animateMaxWidth",class:t.showList?"col-12":"gt-md col-lg-4 col-xl-5"},[a("q-table",{staticClass:"light-bg",attrs:{"no-data-label":"No mods available","row-key":"name",title:"Available Mods",data:t.uploads,config:t.tableConfig,columns:t.tableColumns,"visible-columns":t.visibleColumns},on:{refresh:t.refresh},scopedSlots:t._u([{key:"body-cell-title",fn:function(e){return a("q-td",{attrs:{props:e}},[a("router-link",{attrs:{to:{name:"upload-detail",params:{uploadId:e.row._id}}}},[t._v(t._s(e.value))])],1)}},{key:"body-cell-action",fn:function(e){return a("q-td",{attrs:{props:e}},[t.$route.params.uploadId!==e.row._id?a("q-btn",{attrs:{color:"primary",small:"",outline:"",icon:"fa-info-circle",label:"Show"},on:{click:function(a){t.$router.push({name:"upload-detail",params:{uploadId:e.row._id}})}}}):t._e()],1)}},{key:"body-cell-voting",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n        "+t._s(e.value.sum)+" "),a("i",{staticClass:"fa",class:{"fa-caret-up text-positive":e.value.sum>0,"fa-caret-down text-negative":e.value.sum<0,"fa-sort text-dark":0===e.value.sum}})])}}])})],1)],1)},s=[];l._withStripped=!0;var r=a("XyMi"),u=!1;var d=function(t){u||a("gWkr")},c=Object(r.a)(o,l,s,!1,d,"data-v-74f75863",null);c.options.__file="src/pages/UploadList.vue";e.default=c.exports},gWkr:function(t,e,a){var n=a("uT8R");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("rjj0").default)("825f20c6",n,!1,{})},uT8R:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.animateMaxWidth[data-v-74f75863] {\n  transition: max-width 0.5s ease-in-out;\n}\n.grow-fade-enter-active[data-v-74f75863] {\n  transition: all 0.5s ease-in-out;\n}\n.grow-fade-leave-active[data-v-74f75863] {\n  transition: all 0.5s ease-in-out;\n}\n.grow-fade-enter[data-v-74f75863],\n.grow-fade-leave-to[data-v-74f75863] {\n  max-width: 0;\n  opacity: 0;\n}\n",""])}});